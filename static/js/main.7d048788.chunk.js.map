{"version":3,"sources":["version.js","Generator.js","App.js","index.js"],"names":["VERSION","date2int","date","dayjs","format","generate_yaml","state","concat","start_date","end_date","items","map","item","index","item_id","amount","join","DATE_FORMAT","AttendanceDay","props","react_default","a","createElement","className","type","value","entry","onChange","e","changeItem","target","changeAmount","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","now","add","Array","fill","handleStartChange","bind","assertThisInitialized","handleEndChange","Storage","localStorage","getItem","setState","JSON","parse","setItem","stringify","isBefore","toast","error","prevState","objectSpread","toConsumableArray","slice","_this2","lib","build","md","htmlFor","id","min","App_AttendanceDay","sm","style","minWidth","height","Component","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.7d048788.chunk.js","sourcesContent":["const VERSION = \"0.3.0\"\r\n\r\nexport default VERSION\r\n","import dayjs from 'dayjs'\r\nimport VERSION from './version'\r\n\r\nfunction date2int(date) {\r\n    return dayjs(date).format('YYYYMMDD')\r\n}\r\n\r\nexport function generate_lua(state) {\r\n    return `-- Generated with Secret's Attendance Generator version ${VERSION}\r\nConfig = { StartDate = ${date2int(state.start_date)}, EndDate = ${date2int(state.end_date)} }\r\nReward = {\r\n    ${\r\n        state.items.map((item, index) => `{ ${index+1}, ${item.item_id}, ${item.amount} }` ).join(',\\n    ')\r\n    }\r\n}\r\n\r\nmain = function()\r\n    result, msg = InsertCheckAttendanceConfig(Config.EvendOnOff, Config.StartDate, Config.EndDate)\r\n    if not result == true then\r\n        return false, msg\r\n    end\r\n    for k, rewardtbl in pairs(Reward) do\r\n        result, msg = InsertCheckAttendanceReward(rewardtbl[1], rewardtbl[2], rewardtbl[3])\r\n        if not result == true then\r\n            return false, msg\r\n        end\r\n    end\r\n    return true, \"success\"\r\nend\r\n`\r\n}\r\n\r\nexport function generate_yaml(state) {\r\n    return `# Generated with Secret's Attendance Generator version ${VERSION}\r\nHeader:\r\n  Type: ATTENDANCE_DB\r\n  Version: 1\r\n  \r\nAttendance:\r\n  - Start: ${date2int(state.start_date)}\r\n    End: ${date2int(state.end_date)}\r\n    Rewards:\r\n${\r\n    state.items.map((item, index) => \r\n`      - Day: ${index+1}\r\n        ItemId: ${item.item_id}\r\n        Amount: ${item.amount}\r\n`).join('')\r\n}\r\n`\r\n}\r\n","import React, { Component } from 'react'\r\nimport dayjs from 'dayjs'\r\nimport { ToastContainer, toast } from 'react-toastify'\r\nimport { Container, Row, Col } from 'react-grid-system'\r\nimport './App.css'\r\nimport 'react-toastify/dist/ReactToastify.min.css'\r\n\r\nimport { generate_lua, generate_yaml } from './Generator'\r\nimport VERSION from './version'\r\n\r\nconst DATE_FORMAT = 'YYYY-MM-DD'\r\n\r\nconst AttendanceDay = (props) => (\r\n  <span className=\"day\">\r\n    <label>Day {props.index+1} ID</label>\r\n    <input type=\"number\" value={props.entry.item_id} onChange={(e) => props.changeItem(e.target.value, props.index)} />\r\n    <label>Amount</label>\r\n    <input type=\"number\" value={props.entry.amount} onChange={(e) => props.changeAmount(e.target.value, props.index)} />\r\n  </span>\r\n)\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    let now = dayjs()\r\n    this.state = {\r\n      start_date: now.format(DATE_FORMAT),\r\n      end_date: now.add(20, 'day').format(DATE_FORMAT),\r\n      items: Array(20).fill({ item_id: 501, amount: 1 })\r\n    }\r\n\r\n    this.handleStartChange = this.handleStartChange.bind(this)\r\n    this.handleEndChange = this.handleEndChange.bind(this)\r\n    this.changeItem = this.changeItem.bind(this)\r\n    this.changeAmount = this.changeAmount.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n    if(typeof(Storage) === 'undefined')\r\n      return\r\n    \r\n    let items = localStorage.getItem('items')\r\n    if(items !== null) {\r\n      this.setState({\r\n        items: JSON.parse(items)\r\n      })\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    localStorage.setItem('items', JSON.stringify(this.state.items))\r\n  }\r\n\r\n  handleStartChange(e) {\r\n    this.setState({\r\n      start_date: e.target.value\r\n    })\r\n  }\r\n\r\n  handleEndChange(e) {\r\n    let date = e.target.value\r\n    if(dayjs(date).isBefore(dayjs(this.state.start_date))) {\r\n      toast.error('Invalid option. End date is before start date.')\r\n      return\r\n    }\r\n\r\n    this.setState({\r\n      end_date: e.target.value\r\n    })\r\n  }\r\n\r\n  changeItem(item_id, index) {\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      items: [\r\n        ...prevState.items.slice(0, index),\r\n        { item_id, amount: prevState.items[index].amount },\r\n        ...prevState.items.slice(index+1)\r\n      ]\r\n    }))\r\n  }\r\n\r\n  changeAmount(amount, index) {\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      items: [\r\n        ...prevState.items.slice(0, index),\r\n        { item_id: prevState.items[index].item_id, amount },\r\n        ...prevState.items.slice(index+1)\r\n      ]\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <ToastContainer/>\r\n        <header className=\"App-header\">\r\n          <h1 className=\"App-title\">Attendance Generator</h1>\r\n          <h5>for rAthena and RO Client</h5>\r\n        </header>\r\n        <Container className=\"container App-content\">\r\n          <Row>\r\n            <Col md={6}>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"start\">Start date:</label>\r\n                <input type=\"date\" id=\"start\" onChange={this.handleStartChange} value={this.state.start_date} />\r\n              </div>\r\n            </Col>\r\n            <Col md={6}>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"end\">End date:</label>\r\n                <input type=\"date\" id=\"end\" onChange={this.handleEndChange} min={this.state.start_date} value={this.state.end_date} />\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n              {\r\n                this.state.items.map((entry, index) =>\r\n                  <Col md={6}>\r\n                    <AttendanceDay changeItem={this.changeItem} changeAmount={this.changeAmount} index={index} entry={entry} />\r\n                  </Col>\r\n                )\r\n              }\r\n          </Row>\r\n          <Row>\r\n            <Col sm={12}>\r\n              <textarea style={{ minWidth: \"40%\", height: \"200px\" }} value={generate_lua(this.state)} />\r\n            </Col>\r\n            <Col sm={12}>\r\n              <textarea style={{ minWidth: \"40%\", height: \"200px\" }} value={generate_yaml(this.state)} />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <p>Attendance Generator v.{VERSION} &copy; 2018-2019 Jittapan P. All rights reserved.</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}